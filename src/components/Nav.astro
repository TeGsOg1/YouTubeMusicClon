---
import SearcherIcon from "@/icons/SearcherIcon.astro";
---

<nav class="flex flex-row justify-end md:m-auto">
  <input
  type="text"
  id="searcher"
  class=" justify-end w-0 hidden md:block md:w-[400px] p-2 rounded-3xl indent-4 focus:border-none transition-all bg-gray-800 text-white"
  placeholder="Busca una canciÃ³n..."
  />
  <div id="search" class="flex bg-gray-800 rounded-3xl p-2 justify-center items-center h-10 cursor-pointer hover:bg-gray-600 transition-all">
    <SearcherIcon />
  </div>
  
</nav>

<script>
  const searchbtn = document.querySelector('#search');
  const searcher = document.querySelector('input');

  searchbtn?.addEventListener('click', () => {
    searcher?.classList.toggle('w-0');
    searcher?.classList.toggle('hidden');
  });


  if(searcher) {
    searcher.addEventListener('keyup', (e) => {
      if(e.key === 'Enter') {
        window.location.href = `/search/${searcher.value}`;
      }
    });
  }
</script>